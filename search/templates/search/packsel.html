{% extends "earkweb/base.html" %}

{% load staticfiles %}

{% block extra_head %}

<!-- AIP to DIP javascript -->
<script type="text/javascript" src="{% static 'search/js/aip2dip.js' %}"></script>

<!-- packsel.html javascript -->
<script type="text/javascript" src="{% static 'search/js/packsel.js' %}"></script>
<link rel="stylesheet" href="{% static " search/css/packsel.css" %}" type="text/css" />

{% endblock %}

{% block content %}

{% include "search/about_module.html" %}

<h2 class="main">Active AIP to DIP conversion processes</h2>

<p>The following table gives an overview about open the DIP creation processes. Each package has a package name which was provided in the first step of the
    DIP creation process, and the AIP selection used to create the DIP is shown.</p>

<table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
                <th>DIP package name</th>
                <th>Selected AIPs</th>
      </tr>
    </thead>

        <tbody>

        {% for dip in package_list %}
        <div id="{{ dip.safe_path_string }}">

        <tr>
            <td><a href="{% url 'search:dip' dip.name %}"><b>{{ dip.name }}</b></a>
                <a id="remproc{{ dip.safe_path_string }}" title="remproc{{ dip.name }}" href="#">
                    <span data-toggle="tooltip" title="Remove this process" class="glyphicon glyphicon-remove"></span>
                </a></td>
            <td>
                <ul>
                    {% if dip.aips.all %}
                    {% for aip in dip.aips.all %}
                    <li id="{{ dip.safe_path_string }}{{ aip.safe_string }}">{{ aip.identifier }}

                        <a id="remaip{{ aip.safe_string }}" title="remaip{{ dip.name }}~{{ aip.identifier }}" href="#">
                            <span data-toggle="tooltip" title="Remove this package" class="glyphicon glyphicon-remove" style="color:gray"></span>
                        </a>
                    </li>
                    {% endfor %}
                    {% else %}
                    <li><a href="{% url 'search:search' dip.name|urlencode %}">Select AIPs</a></li>
                    {% endif %}
                </ul>
                <p style="margin-left: 2em"><a href="{% url 'search:search' dip.name|urlencode %}">Modify selection</a></p>
            </td>
        </tr>

        </div>
        {% endfor %}

        </tbody>

  </table></form>

<p>Proceed to the next step by clicking on the corresponding DIP package name link which is where transformation tasks can be executed.</p>

{% endblock %}

