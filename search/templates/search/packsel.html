{% extends "earkweb/base.html" %}

{% load staticfiles %}

{% block extra_head %}

    <!-- AIP to DIP javascript -->
    <script type="text/javascript" src="{% static 'search/js/aip2dip.js' %}"></script>

    <!-- packsel.html javascript -->
    <script type="text/javascript" src="{% static 'search/js/packsel.js' %}"></script>
    <link rel="stylesheet" href="{% static "search/css/packsel.css" %}" type="text/css" />
      
{% endblock %}

{% block content %}

<h1>Active AIP to DIP conversion processes</h1>

<form>
    {% csrf_token %}
    {% for dip in package_list %}
        <div id="{{ dip.safe_path_string }}">

            <p><a href="{% url 'search:dip' dip.name %}"><b>{{ dip.name }}</b></a>

                <a id="remproc{{ dip.safe_path_string }}" title="remproc{{ dip.name }}"  href="#">
                <span data-toggle="tooltip" title="Remove this process" class="glyphicon glyphicon-remove"></span>
                </a>
            </p>

            <ul>
            {% if dip.aips.all %}
                {% for aip in dip.aips.all %}
                    <li id="{{ dip.safe_path_string }}{{ aip.safe_string }}">{{ aip.identifier }}

                        <a id="remaip{{ aip.safe_string }}" title="remaip{{ dip.name }}~{{ aip.identifier }}"  href="#">
                        <span data-toggle="tooltip" title="Remove this package" class="glyphicon glyphicon-remove" style="color:gray"></span>
                        </a>
                    </li>
                {% endfor %}

            {% else %}
                <li><a href="{% url 'search:search' dip.name|urlencode %}">Select AIPs</a></li>
            {% endif %}
            </ul>
            <p style="margin-left: 2em"><a href="{% url 'search:search' dip.name|urlencode %}">Modify selection</a></p>

        </div>
    {% endfor %}
</form>

{% endblock %}
