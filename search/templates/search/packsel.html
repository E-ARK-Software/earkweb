{% extends "earkweb/base.html" %}

{% load staticfiles %}

{% block extra_head %}

    <!-- AIP to DIP javascript -->
    <script type="text/javascript" src="{% static 'search/js/aip2dip.js' %}"></script>

    <!-- packsel.html javascript -->
    <script type="text/javascript" src="{% static 'search/js/packsel.js' %}"></script>
    <link rel="stylesheet" href="{% static "search/css/packsel.css" %}" type="text/css" />
      
{% endblock %}

{% block content %}

<h1>Active AIP to DIP conversion processes</h1>

<form>
    {% csrf_token %}
    {% for dip in package_list %}
        <div id="{{ dip.safe_path_string }}">

            <p><a href="{% url 'search:dip' dip.name %}"><b>{{ dip.name }}</b></a>

                <a id="remproc{{ dip.safe_path_string }}" title="remproc{{ dip.name }}"  href="#">
                <span data-toggle="tooltip" title="Remove this process" class="glyphicon glyphicon-remove"></span>
                </a>
            </p>

            <ul>
            {% if dip.aips.all %}
                {% for package in dip.aips.all %}
                    <li>{{ package.identifier }} </li>
                {% endfor %}
            {% else %}
                <li><a href="{% url 'search:search' dip.name|urlencode %}">Select AIPs</a></li>
            {% endif %}
            </ul>

        </div>
    {% endfor %}
</form>
<br>
<form action="{% url 'search:create_dip' %}" method="post">
    {% csrf_token %}
    <input type="text" name="name" />
    <input type="submit" value="new DIP" />
</form>

{% endblock %}
